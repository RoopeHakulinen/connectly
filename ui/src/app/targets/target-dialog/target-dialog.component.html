<h2 mat-dialog-title>{{ (isEditMode ? 'TARGET_DIALOG.TITLE_EDIT' : 'TARGET_DIALOG.TITLE_NEW') | translate }}</h2>
<mat-dialog-content>
  <form [formGroup]="form" class="target-form">
    <mat-form-field appearance="outline">
      <mat-label>{{ 'TARGET_DIALOG.NAME' | translate }}</mat-label>
      <input matInput formControlName="name" [placeholder]="'TARGET_DIALOG.NAME_PLACEHOLDER' | translate" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>{{ 'TARGET_DIALOG.TYPE' | translate }}</mat-label>
      <mat-select formControlName="type">
        @for (type of targetTypes; track type) {
          <mat-option [value]="type">{{ 'TARGETS.TYPES.' + type | translate }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>{{ 'TARGET_DIALOG.FREQUENCY' | translate }}</mat-label>
      <mat-select formControlName="tierId">
        @if (tiers$ | async; as result) {
        @if (result.isLoading) {
          <mat-option disabled>{{ 'COMMON.LOADING' | translate }}</mat-option>
        }
        @if (result.data) {
        @for (tier of result.data; track tier.id) {
        <mat-option [value]="tier.id">{{ tier.interval | recurrence | async }}</mat-option>
        }
        }
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>{{ 'TARGET_DIALOG.NOTES' | translate }}</mat-label>
      <textarea matInput formControlName="notes" rows="4"></textarea>
    </mat-form-field>
  </form>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close>{{ 'COMMON.CANCEL' | translate }}</button>
  <button mat-raised-button color="primary" (click)="save()" [disabled]="form.invalid">
    {{ 'COMMON.SAVE' | translate }}
  </button>
</mat-dialog-actions>
